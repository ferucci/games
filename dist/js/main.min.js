const getTemplate=(t=[],e,s)=>{let i=e??"Placeholder default";e=t.map(t=>{let e="";return t.id===s&&(i=t.value,e="selected"),`
    <li class="select__item ${e}" data-type="item" data-id="${t.id}">${t.value}</li>`});return`
        <div class="select__backdrop" data-type="backdrop"></div>
        <div class="select__input" data-type="input">
            <span data-type="value">${i}</span>
            <span class="triangle-icon-open" data-type="arrow"></span>
          </div>
          <div class="select__dropdown">
            <ul class="select__list">
              ${e.join("")}
            </ul>
        </div>
    `};class Select{constructor(t,e){this.elem=document.querySelector(t),this.elem&&(this.options=e,this.selectedId=e.selectedId,this.#render(),this.#setup())}#render(){var{placeholder:t,data:e}=this.options;this.elem.classList.add("select"),this.elem.innerHTML=getTemplate(e,t,this.selectedId)}#setup(){this.clickHandler=this.clickHandler.bind(this),this.elem.addEventListener("click",this.clickHandler),this.arrow=this.elem.querySelector('[data-type="arrow"]'),this.value=this.elem.querySelector('[data-type="value"]')}clickHandler(t){var e=t.target.dataset["type"];"input"===e||t.target.closest(".select__input")?(document.querySelectorAll(".select").forEach(t=>{t.closest(".select-open")&&(t.classList.remove("select-open"),(t=t.querySelector(".triangle-icon-close")).classList.remove("triangle-icon-close"),t.classList.add("triangle-icon-open"))}),this.toggle()):"item"===e?(t=t.target.dataset.id,this.select(t)):"backdrop"===e&&this.close()}get isOpen(){return this.elem.classList.contains("select-open")}get current(){return this.options.data.find(t=>t.id===this.selectedId)}select(t){this.selectedId=t,this.value.textContent=this.current.value,this.elem.querySelectorAll('[data-type="item"]').forEach(t=>{t.classList.remove("selected")}),this.elem.querySelector(`[data-id="${t}"]`).classList.add("selected"),this.options.onSelect&&this.options.onSelect(this.current),this.close()}toggle(){this.isOpen?this.close():this.open()}open(){this.elem.classList.add("select-open"),this.arrow.classList.remove("triangle-icon-open"),this.arrow.classList.add("triangle-icon-close")}close(){this.elem.classList.remove("select-open"),this.arrow.classList.remove("triangle-icon-close"),this.arrow.classList.add("triangle-icon-open")}destroy(){this.elem.removeEventListener("click",this.clickHandler),this.elem.innerHTML=""}}class Tabs{constructor(t,e){this.options=Object.assign({isChanged:()=>{}},e),this.selector=t,this.tabs=document.querySelector(`[data-tabs="${t}"]`),this.tabs?(this.tabList=this.tabs.querySelector(e.tabList),this.tabsBtns=this.tabList.querySelectorAll(e.tabsBtns),this.content=document.querySelector(e.content),this.contentItem=this.content.querySelectorAll(e.contentItem),this.check(),this.init(),this.events()):console.error("Селектор data-tabs не существует. Или подключенный файл содержит несколько вызовов табов, один из которых не существует.")}check(){1<document.querySelectorAll(`[data-tabs="${this.selector}"]`).length?console.error("Колличество элементов с одинаковым data-tabs больше одного!"):this.tabsBtns.length!==this.contentItem.length&&console.error("Колличество кнопок и элементов не совпадает")}init(){this.tabList.setAttribute("role","tablist"),this.tabsBtns.forEach((t,e)=>{t.setAttribute("role","tab"),t.setAttribute("tabindex","-1"),t.setAttribute("id",""+this.selector+(e+1)),t.classList.remove(this.options.linkActive)}),this.contentItem.forEach((t,e)=>{t.setAttribute("role","tabpanel"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-labelledby",this.tabsBtns[e].id),t.classList.remove(this.options.contentBoxActive)}),this.tabsBtns[0].classList.add(this.options.linkActive),this.tabsBtns[0].removeAttribute("tabindex"),this.tabsBtns[0].setAttribute("aria-selected","true"),this.contentItem[0].classList.add(this.options.contentBoxActive)}events(){this.tabsBtns.forEach((t,i)=>{t.addEventListener("click",t=>{var e=this.tabList.querySelector("[aria-selected]");t.currentTarget!==e&&this.switchTabs(t.currentTarget,e)}),t.addEventListener("keydown",t=>{var e=Array.prototype.indexOf.call(this.tabsBtns,t.currentTarget);let s=null;null!==(s=37===t.which?e-1:39===t.which?e+1:40===t.which?"down":null)&&("down"===s?this.contentItem[i].focus():this.tabsBtns[s]&&this.switchTabs(this.tabsBtns[s],t.currentTarget))})})}switchTabs(t,e=this.tabs.querySelector("[aria-selected]")){t.focus(),t.removeAttribute("tabindex"),t.setAttribute("aria-selected","true"),e.removeAttribute("aria-selected"),e.setAttribute("tabindex","-1");t=Array.prototype.indexOf.call(this.tabsBtns,t),e=Array.prototype.indexOf.call(this.tabsBtns,e);this.contentItem[e].classList.remove("content__box--active"),this.contentItem[t].classList.add("content__box--active"),this.tabsBtns[e].classList.remove("content__tab-link--active"),this.tabsBtns[t].classList.add("content__tab-link--active"),this.options.isChanged(this)}}const profileTabsOptions={tabList:".profile-content__tabs",tabsBtns:".content__tab-link",content:".profile-content-box",contentItem:".content__box",linkActive:"content__tab-link--active",contentBoxActive:"content__box--active",isChanged:t=>{}},faqTabsOptions={tabList:".content__tabs",tabsBtns:".content__tab-link",content:".faq-content-box",contentItem:".content__box",linkActive:"content__tab-link--active",contentBoxActive:"content__box--active",isChanged:t=>{}},SliderClassName="index-slider",SliderLineClassName="index-slider__line",SliderItemClassName="index-slider__item",SliderDraggableClassName="draggable",SliderDotsClassName="index-slider__dots",SliderDotClassName="index-slider__dot",SliderDotActiveClassName="index-slider__dot--active",SliderNavClassName="index-slider__btns",SliderNavLeftClassName="index-slider__btn-left",SliderNavRightClassName="index-slider__btn-right",SliderNavDisabledClassName="index-slider__btn-disabled";class Slider{constructor(t,e={}){this.containerNode=t,this.size=t.childElementCount,this.currentSlide=0,this.currentSlideWasChanged=!1,this.settings={margin:e.margin||0,innerElementsClass:e.innerElementsClass||""},this.manageHTML=this.manageHTML.bind(this),this.setParameters=this.setParameters.bind(this),this.setEvents=this.setEvents.bind(this),this.resize=this.resize.bind(this),this.startDrag=this.startDrag.bind(this),this.stopDrag=this.stopDrag.bind(this),this.dragging=this.dragging.bind(this),this.setStylePosition=this.setStylePosition.bind(this),this.progressBar=this.progressBar.bind(this),this.moveToLeft=this.moveToLeft.bind(this),this.moveToRight=this.moveToRight.bind(this),this.changeCurrentSlide=this.changeCurrentSlide.bind(this),this.changeDisabledBtn=this.changeDisabledBtn.bind(this),this.manageHTML(),this.setParameters(),this.setEvents()}manageHTML(){this.containerNode.classList.add(SliderClassName),this.containerNode.innerHTML=`
      <div class="${SliderLineClassName}">
        ${this.containerNode.innerHTML}
      </div>
      <div class="${SliderNavClassName}">
        <button class="${SliderNavLeftClassName}"></button>
        <button class="${SliderNavRightClassName}"></button>
      </div>
      <div class="${SliderDotsClassName}"></div>
    `,this.lineNode=this.containerNode.querySelector("."+SliderLineClassName),this.dotsNode=this.containerNode.querySelector("."+SliderDotsClassName),this.slideNodes=Array.from(this.lineNode.children).map(t=>wrapElementByDiv({element:t,className:SliderItemClassName})),this.dotsNode.innerHTML=`<button class="${SliderDotClassName}"></button>`,this.btnLeft=document.querySelector("."+SliderNavLeftClassName),this.btnRight=document.querySelector("."+SliderNavRightClassName)}setParameters(){const s=this.containerNode.getBoundingClientRect();this.containerNode.querySelectorAll("."+this.settings.innerElementsClass)?document.documentElement.clientWidth<992?(this.containerNode.querySelectorAll("."+this.settings.innerElementsClass).forEach((t,e)=>{this.width=t.scrollWidth-s.width/100}),this.settings.margin=0,this.size=3*this.containerNode.querySelectorAll("."+this.settings.innerElementsClass).length):(this.size=this.containerNode.querySelectorAll("."+this.settings.innerElementsClass).length,this.width=s.width,this.currentSlide=0,this.settings.margin=this.settings.margin+5):this.width=s.width,this.dotsNode.children[0].style.width="50%",this.maximumX=-(this.size-1)*(this.width+this.settings.margin),this.x=-this.currentSlide*(this.width+this.settings.margin),this.resetStyleTransition(),this.lineNode.style.width=this.size*(this.width+this.settings.margin)+"px",this.setStylePosition(),this.changeDisabledBtn(),Array.from(this.slideNodes).forEach(t=>{t.style.width=this.width+"px",t.style.marginRight=this.settings.margin+"px"})}setEvents(){this.debonceResize=debonce(this.resize),window.addEventListener("resize",this.debonceResize),this.lineNode.addEventListener("pointerdown",this.startDrag),window.addEventListener("pointerup",this.stopDrag),window.addEventListener("pointercancel",this.stopDrag),this.btnLeft.addEventListener("click",this.moveToLeft),this.btnRight.addEventListener("click",this.moveToRight)}destroyEvents(){window.removeEventListener("resize",this.debonceResize),this.lineNode.removeEventListener("pointerdown",this.startDrag),window.removeEventListener("pointerup",this.stopDrag),window.removeEventListener("pointercancel",this.stopDrag),this.btnLeft.removeEventListener("click",this.moveToLeft),this.btnRight.removeEventListener("click",this.moveToRight)}resize(){this.setParameters(),this.setStylePosition()}startDrag(t){this.currentSlideWasChanged=!1,this.clickX=t.pageX,this.startX=this.x,this.resetStyleTransition(),this.containerNode.classList.add(SliderDraggableClassName),window.addEventListener("pointermove",this.dragging)}stopDrag(){window.removeEventListener("pointermove",this.dragging),this.containerNode.classList.remove(SliderDraggableClassName),this.changeCurrentSlide()}dragging(t){this.dragX=t.pageX;var t=this.dragX-this.clickX,e=t/5;this.x=Math.max(Math.min(t+this.startX,e),this.maximumX+e),document.documentElement.clientWidth<1310&&this.setStylePosition(),7<t&&0<t&&!this.currentSlideWasChanged&&0<this.currentSlide&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide-1),t<-7&&t<0&&!this.currentSlideWasChanged&&this.currentSlide<this.size-1&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide+1)}moveToRight(){this.currentSlide>=this.size-1||(this.currentSlide=this.currentSlide+1,this.changeCurrentSlide())}moveToLeft(){this.currentSlide<=0||(this.currentSlide=this.currentSlide-1,this.changeCurrentSlide())}changeCurrentSlide(){this.x=-this.currentSlide*(this.width+this.settings.margin),this.setStylePosition(),this.setStyleTransition(),this.changeDisabledBtn()}progressBar(){console.log(this)}changeDisabledBtn(){this.currentSlide<=0?this.btnLeft.classList.add(SliderNavDisabledClassName):this.btnLeft.classList.remove(SliderNavDisabledClassName),this.currentSlide>=this.size-1?this.btnRight.classList.add(SliderNavDisabledClassName):this.btnRight.classList.remove(SliderNavDisabledClassName)}setStylePosition(){document.documentElement.clientWidth<992?this.lineNode.style.transform=`translate3d(${this.x/3+this.settings.margin}px, 0, 0)`:this.lineNode.style.transform=`translate3d(${this.x}px, 0, 0)`}setStyleTransition(){this.lineNode.style.transition="all 0.25s ease 0s"}resetStyleTransition(){this.lineNode.style.transition="all 0s ease 0s"}}function wrapElementByDiv({element:t,className:e}){var s=document.createElement("div");return s.classList.add(e),t.parentNode.insertBefore(s,t),s.appendChild(t),s}function debonce(e,s=200){let i;return function(t){clearTimeout(i),i=setTimeout(e,s,t)}}const selectOptions={placeholder:"Выберите способ покупки",selectedId:"1",data:[{id:"1",value:"Аренда через семейный доступ"},{id:"2",value:"Аренда через личный доступ"}],onSelect(t){}},selectOptionsBuy={placeholder:"Выберите способ покупки",data:[{id:"1",value:"Способ покупки 1"},{id:"2",value:"Способ покупки 2"},{id:"3",value:"Способ покупки 3"},{id:"4",value:"Способ покупки 4"}],onSelect(t){}},selectOptionsFilter1={placeholder:"Выберите элемент",selectedId:"1",data:[{id:"1",value:"Дате заказа"}],onSelect(t){}},selectOptionsFilter2={placeholder:"Выберите элемент",selectedId:"1",data:[{id:"1",value:"Сумме заказа"}],onSelect(t){},styles:[{background:"#3F434B;",boxShadow:"inset 0px 4px 16px rgba(0, 0, 0, 0.1);"}]},selectPurshare=new Select("#select-n",selectOptionsBuy),select1=new Select("#select-1",selectOptions),select2=new Select("#select-2",selectOptions),select3=new Select("#select-3",selectOptions),selectFilter1=new Select("#select-filter-1",selectOptionsFilter1),selectFilter2=new Select("#select-filter-2",selectOptionsFilter2),faqTabs=new Tabs("faq-tab",faqTabsOptions),profileTabs=new Tabs("profile-tab",profileTabsOptions);document.querySelector("#profile-tab2")&&profileTabs.switchTabs(document.querySelector("#profile-tab2")),window.addEventListener("DOMContentLoaded",()=>{var t=document.getElementById("slider");document.querySelector(".catalog__top>nav>ul");if(t&&new Slider(t,{margin:20,innerElementsClass:"slider__item"}),document.querySelector(".catalog__wrapp")){t=document.querySelector(".catalog__wrapp");const i=t.querySelectorAll(".game-card"),n=t.querySelector("nav");n.addEventListener("click",s=>{if(s.target.closest("button")){let e=s.target.dataset.fil;n.querySelectorAll(".catalog-btn").forEach((t,e)=>{s.target==t?t.classList.add("catalog-btn-active"):t.classList.remove("catalog-btn-active")}),console.log(s.target),i.forEach(t=>{t.classList.contains(e)?t.classList.remove("hide"):t.classList.add("hide")})}})}});